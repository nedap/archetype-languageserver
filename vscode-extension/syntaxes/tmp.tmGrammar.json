{
	"scopeName": "source.adl",
	"patterns": [{ "include": "#basics" }],
	"repository": {
		"basics": {
			"patterns": [
				{ "include": "#comment" },
				{ "include": "#string"  },				
				{ "include": "#odin"  },
				{ "include": "#definition"  },
				{ "include": "#sections"  }
			]
		},
	  	"comment": {
			"name": "comment",
			"match": "--.*$"
		},
		"string": {
			"name": "string.doubleQuoted",
			"match": "\"[^\"]*?\""
		},
		"number": {
			"name": "number",
			"match": "-?\\d+\\.(\\d+([eE][-+]?\\d+)?)?"
		},
		"sections": {
			"name": "keyword",
			"match": "(archetype|template|operational_template|template_overlay|terminology|definition|language|specialise|description)"
		},
		"odin_start": {
			"name": "meta.odin",
			"begin": "([a-zA-Z_$][a-zA-Z0-9_$]+)\\s*=\\s*<",
			"end": ">",
			"beginCaptures": {
				"0": "entity.name.tag"
			},
			
			  
			"patterns": [{"include": "#odin"}]
		},
		"odin": {
			"patterns": [
				{ "include": "#comment" },
				{ "include": "#odinHash" },
				{ "include": "#odin_start" },				
				{ "include": "#odinArray" }
				
			]
		},
		"odinEquals": {
			"match": "=",
			"name": "keyword.operator.equals"
		},
		"odinHash": {
			"name": "meta.odin.hash",
			"begin": "\\[\".*\"\\]\\s*=\\s*<",
			"end": ">",
			"beginCaptures": {
				"0": {"name":"punctuation.odin.hash.start"}
			},
			"endCaptures": {
				"0": {"name":"punctuation.odin.hash.end"}
			},
			"patterns": [
				{ "include": "#odin_primitives" }
			]
		},
		"odinArray": {
			"name": "entity.name.type",
			"begin": "\\[",
			"end": "\\]",						
			"patterns": [
				{ "include": "#odin_primitives" },
				{"name": "punctiation.odin.array.separator", "match": ","}
			]
		},
		"odinPrimitive": {
			"name": "string.odin.primitive",
			"patterns": [
				{"includes": "#string"},
				{"includes": "#comment"},
				{"includes": "#number"}
			]
		},
		"definition": {
			"begin": "(definition)(\\s\\n)*",
			"end": "[a-zA-Z]",
			"beginCaptures": {
				"0": "keyword"
			}
		}
	}
}
	  
  
	